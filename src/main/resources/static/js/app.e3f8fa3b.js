(function(){"use strict";var t={3476:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",[e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.goodsData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{label:"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:"http://localhost:8081/img/"+t.row.imgPath}})]}}])}),e("el-table-column",{attrs:{prop:"name",label:"名字",width:"120"}}),e("el-table-column",{attrs:{prop:"price",label:"单价","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"totalPrices",label:"总价","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"amount",label:"数量","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input-number",{attrs:{min:0,max:10,label:"描述文字"},on:{change:function(e){return t.handleChange(a.row)}},model:{value:a.row.amount,callback:function(e){t.$set(a.row,"amount",e)},expression:"scope.row.amount"}})]}}])})],1),e("div",{staticClass:"overlay"},[e("el-button",{staticStyle:{"margin-left":"auto"},attrs:{round:""},on:{click:function(e){return t.createOrder()}}},[t._v("确认订单")])],1)],1)},r=[],s=(a(4114),a(4373)),i={data(){return{goodsData:[],multipleSelection:[],totalPrices:"",selected:[]}},created(){this.loadCart()},methods:{handleSelectionChange(t){this.selected=t},loadCart(){s.A.get("http://localhost:8081/user/cart/getcart",{headers:{token:this.$store.state.token}}).then((t=>{this.goodsData=t.data.data.list,this.totalPrices=t.data.data.totalPrices,this.goodsData.forEach((t=>{t.realAmount=t.amount}))})).catch((t=>{}))},toggleSelection(t){t?t.forEach((t=>{this.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},handleChange(t){if(t.amount<t.realAmount){const e=new FormData;e.append("goodsId",t.goodsId),e.append("amount",parseInt("1")),s.A.post("http://localhost:8081/user/cart/deletegoods",e,{headers:{token:this.$store.state.token,"content-type":"multipart/form-data; boundary=---011000010111000001101001"}}).then((e=>{t.realAmount=t.realAmount-1}))}else if(t.amount>t.realAmount){const e=new FormData;e.append("goodsId",t.goodsId),e.append("amount",parseInt("1")),s.A.post("http://localhost:8081/user/cart/addgoods",e,{headers:{token:this.$store.state.token}}).then((e=>{t.realAmount=t.realAmount+1}))}},createOrder(){this.$router.push({path:"/createorder",query:{arrayParam:this.selected}})}}},l=i,n=a(1656),d=(0,n.A)(l,o,r,!1,null,null,null),c=d.exports},9571:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",[e("el-page-header",{attrs:{content:"详情页面"},on:{back:t.goBack}}),e("div",{staticClass:"product-details"},[e("div",{staticClass:"product-image"},[e("img",{attrs:{src:"http://localhost:8081/img/"+this.imgPath,alt:"Product Image"}})]),e("div",{staticClass:"product-info"},[e("h2",[t._v(t._s(t.name))]),e("p",[t._v(t._s(t.description))]),e("p",[t._v("价格: "+t._s(t.price))]),e("p",[t._v("销量: "+t._s(t.sales))])])]),e("el-button",{attrs:{type:"danger"},on:{click:t.addGoods}},[t._v("加入购物车")])],1)},r=[],s=a(4373),i={data(){return{id:null,name:"",description:"",price:null,imgPath:"",sales:null}},created(){this.loadDetails()},methods:{goBack(){this.$router.go(-1)},loadDetails(){s.A.get("http://localhost:8081/universal/detail",{params:{id:this.$route.query.itemId}}).then((t=>{this.id=t.data.data.id,this.name=t.data.data.name,this.description=t.data.data.description,this.price=t.data.data.price,this.imgPath=t.data.data.imgPath,this.sales=t.data.data.sales}))},openSuccess(){this.$notify({title:"",message:"添加成功",position:"bottom-right"})},openFail(){this.$notify({title:"",message:"请先登录",position:"bottom-right"})},addGoods(){if(""!==this.$store.state.token){const t=new FormData;t.append("goodsId",this.id),t.append("amount",parseInt("1")),s.A.post("http://localhost:8081/user/cart/addgoods",t,{headers:{token:this.$store.state.token}}).then((t=>{this.openSuccess()}))}else this.openFail()}}},l=i,n=a(1656),d=(0,n.A)(l,o,r,!1,null,"8901bd5e",null),c=d.exports},3638:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",[e("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.loginParam.userName,callback:function(e){t.$set(t.loginParam,"userName",e)},expression:"loginParam.userName"}}),e("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.loginParam.password,callback:function(e){t.$set(t.loginParam,"password",e)},expression:"loginParam.password"}}),e("div",[e("el-link",{attrs:{type:"primary"},on:{click:t.toRegister}},[t._v("注册")])],1),e("el-button",{on:{click:t.login}},[t._v("登录")])],1)},r=[],s=(a(4114),a(4373)),i={data(){return{loginParam:{}}},methods:{login(){s.A.post("http://localhost:8081/universal/login",this.loginParam).then((t=>{this.$store.dispatch("saveToken",t.data.data.jwt),this.$store.dispatch("saveuserType",t.data.data.userType),this.$store.dispatch("saveAvatar",t.data.data.avatarPath);let e=(new Date).getTime(),a=6048e5;localStorage.setItem("token",JSON.stringify({data:t.data.data.jwt,time:e+a})),localStorage.setItem("userType",JSON.stringify({data:t.data.data.userType,time:e+a})),localStorage.setItem("avatar",JSON.stringify({data:"http://localhost:8081/avatar/"+t.data.data.avatarPath,time:e+a})),this.$alert("已跳转到首页","登录成功"),this.$router.push("/show")})).catch((t=>{this.loginParam={},console.error(t)}))},toRegister(){this.$router.push("/register")}}},l=i,n=a(1656),d=(0,n.A)(l,o,r,!1,null,null,null),c=d.exports},9958:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("el-form",{ref:"data",staticClass:"demo-ruleForm",attrs:{model:t.data,"status-icon":"",rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{model:{value:t.data.userName,callback:function(e){t.$set(t.data,"userName",e)},expression:"data.userName"}})],1),e("el-form-item",{attrs:{label:"昵称"}},[e("el-input",{model:{value:t.data.nickName,callback:function(e){t.$set(t.data,"nickName",e)},expression:"data.nickName"}})],1),e("el-form-item",{attrs:{label:"电话"}},[e("el-input",{model:{value:t.data.phoneNumber,callback:function(e){t.$set(t.data,"phoneNumber",e)},expression:"data.phoneNumber"}})],1),e("el-form-item",{attrs:{label:"邮箱"}},[e("el-input",{model:{value:t.data.email,callback:function(e){t.$set(t.data,"email",e)},expression:"data.email"}})],1),e("el-form-item",{attrs:{label:"密码",prop:"pass"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.data.password,callback:function(e){t.$set(t.data,"password",e)},expression:"data.password"}})],1),e("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.data.checkPass,callback:function(e){t.$set(t.data,"checkPass",e)},expression:"data.checkPass"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("注册")])],1)],1)},r=[],s=(a(4114),a(4373)),i={data(){var t=(t,e,a)=>{""===e?a(new Error("请输入密码")):(""!==this.data.checkPass&&this.$refs.data.validateField("checkPass"),a())},e=(t,e,a)=>{""===e?a(new Error("请再次输入密码")):e!==this.data.password?a(new Error("两次输入密码不一致!")):a()};return{data:{userName:"",nickName:"",phoneNumber:"",email:"",password:"",checkPass:""},rules:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:e,trigger:"blur"}]}}},methods:{submitForm(){const t={userName:this.data.userName,nickName:this.data.nickName,phoneNumber:this.data.phoneNumber,email:this.data.email,password:this.data.password};s.A.post("http://localhost:8081/universal/register",t).then((t=>{200==t.data.code&&(this.$alert("","注册成功"),this.$router.push("/login"))}))}}},l=i,n=a(1656),d=(0,n.A)(l,o,r,!1,null,null,null),c=d.exports},4107:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",[e("el-select",{attrs:{placeholder:"全部"},on:{change:t.handleCategoryClick},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}},[e("el-option",{attrs:{label:"全部",value:"0"}}),t._l(t.categories,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2),e("div",{staticClass:"grid-container"},t._l(t.dataList,(function(a){return e("div",{key:a.id,staticClass:"grid-item",on:{click:function(e){return t.toDetailsPage(a.id)}}},[e("img",{staticStyle:{width:"300px",height:"250px","margin-right":"10px"},attrs:{src:"http://localhost:8081/img/"+a.imgPath,alt:""}}),e("div",[t._v(t._s(a.name)+" ￥"+t._s(a.price))])])})),0),e("div",[e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:t.loadLess}},[t._v("上一页")]),e("el-button",{attrs:{type:"primary"},on:{click:t.loadData}},[t._v("下一页"),e("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],1)},r=[],s=(a(4114),a(4373)),i={data(){return{dataList:[],page:0,pageSize:8,currentSize:8,categories:[],selectedCategory:""}},created(){this.loadData(),this.loadCategories(),this.loadToken()},methods:{loadData(){this.loading=!0,0==this.selectedCategory&&8==this.currentSize?(this.page++,s.A.get("http://localhost:8081/universal/page",{params:{page:this.page,size:this.pageSize}}).then((t=>{const e=t.data;if(200===e.code){const t=e.data;this.currentSize=t.length,0===t.length?this.moreToLoad=!1:this.dataList=[...t]}else console.error("Error:",e.message)})).catch((t=>{console.error("Error fetching data:",t)})).finally((()=>{this.loading=!1}))):选择了分类时},loadLess(){this.loading=!0,this.page>1&&(this.page--,s.A.get("http://localhost:8081/universal/page",{params:{page:this.page,size:this.pageSize}}).then((t=>{const e=t.data;if(200===e.code){const t=e.data;this.currentSize=8,0===t.length?this.moreToLoad=!1:this.dataList=[...t]}else console.error("Error:",e.message)})).catch((t=>{console.error("Error fetching data:",t)})).finally((()=>{this.loading=!1})))},loadCategories(){s.A.get("http://localhost:8081/universal/categories").then((t=>{const e=t.data;200===e.code?this.categories=e.data:console.error("Error fetching categories:",e.message)})).catch((t=>{console.error("Error fetching categories:",t)}))},handleCategoryClick(){if(0==selectedCategory)this.dataList=[],this.page=0,this.currentSize=8,this.loadData();else{const t=this.selectedCategory;s.A.get("http://localhost:8081/universal/pagebycategory",{params:{page:this.page=1,size:this.pageSize,categoryId:t}}).then((t=>{const e=t.data;if(200===e.code){const t=e.data;0===t.length?this.moreToLoad=!1:(this.currentSize=e.length,this.dataList=[...t],this.page++)}else console.error("Error:",e.message)})).catch((t=>{console.error("Error fetching data:",t)})).finally((()=>{this.loading=!1}))}},toDetailsPage(t){this.$router.push({path:"/details",query:{itemId:t}})},loadToken(){null!=localStorage.getItem("token")&&(this.$store.dispatch("saveToken",this.getData("token")),this.$store.dispatch("saveuserType",this.getData("userType")),this.$store.dispatch("saveAvatar",this.getData("avatarPath")))},getData(t){let e=JSON.parse(localStorage.getItem(t));return(new Date).getTime()>e.time?(this.$notify({title:"",message:"账号过期,请重新登录",position:"bottom-right"}),localStorage.removeItem("token"),localStorage.removeItem("userType"),localStorage.removeItem("avatar"),null):e.data}}},l=i,n=a(1656),d=(0,n.A)(l,o,r,!1,null,"64934dd4",null),c=d.exports},8030:function(t,e,a){var o=a(6848),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("el-container",[e("el-header",[e("div",[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":1,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[e("el-avatar",{attrs:{size:60,src:"https://empty"},on:{error:t.errorHandler}},[e("img",{attrs:{src:t.avatar}})]),e("el-menu-item",{attrs:{index:"1"}},[e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/show"}},[t._v("首页")])],1),"0"==this.$store.state.userType?e("el-menu-item",{attrs:{index:"2"}},[e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/cart"}},[t._v("购物车")])],1):t._e(),e("el-submenu",{attrs:{index:"3"}},[e("template",{slot:"title"},[t._v("功能菜单")]),""==this.$store.state.userType?e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/login"}},[e("el-menu-item",{attrs:{index:"3-1"}},[t._v("登录")])],1):t._e(),""!=this.$store.state.userType?e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/order"}},[e("el-menu-item",{attrs:{index:"3-2"}},[t._v("个人设置")])],1):t._e(),"0"==this.$store.state.userType?e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/userorder"}},[e("el-menu-item",{attrs:{index:"3-2"}},[t._v("订单")])],1):t._e(),""!=this.$store.state.userType?e("el-menu-item",{attrs:{index:"3-4"},on:{click:function(e){return t.logOut()}}},[t._v("退出")]):t._e()],2),"1"==this.$store.state.userType?e("el-submenu",{attrs:{index:"4"}},[e("template",{slot:"title"},[t._v("管理员功能")]),e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/managecategory"}},[e("el-menu-item",{attrs:{index:"4-1"}},[t._v("管理分类")])],1),e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/managegoods"}},[e("el-menu-item",{attrs:{index:"4-2"}},[t._v("管理商品")])],1),e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/login"}},[e("el-menu-item",{attrs:{index:"4-3"}},[t._v("管理订单")])],1),e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/order"}},[e("el-menu-item",{attrs:{index:"4-4"}},[t._v("管理用户")])],1)],2):t._e()],1)],1)]),e("el-main",[e("router-view")],1)],1)],1)},s=[],i=a(4373),l=a(4107),n=a(3476),d=a(3638),c=a(9958),u=a(9571),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"divclass"},[e("div",{staticClass:"button-container"},[e("el-button",{staticClass:"left-button",attrs:{type:"text"},on:{click:t.addCate}},[t._v("添加分类")])],1),e("div",{staticClass:"table-container"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,"max-height":"700px"}},[e("el-table-column",{attrs:{fixed:"",prop:"id",label:"id",width:"150"}}),e("el-table-column",{attrs:{fixed:"",prop:"name",label:"分类名",width:"150"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleChange(a.row.id)}},model:{value:a.row.id,callback:function(e){t.$set(a.row,"id",e)},expression:"scope.row.id"}},[t._v(" 删除 ")])]}}])})],1)],1)])},p=[],m={data(){return{data:[]}},created(){this.loadCategory()},methods:{handleChange(t){const e={method:"DELETE",url:"http://localhost:8081/admin/cate/del",params:{id:t.id},headers:{token:this.$store.state.token}};i.A.request(e).then((function(t){console.log(t.data)})).catch((function(t){console.error(t)}))},addCate(){this.$prompt("请输入分类名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:t})=>{const e=new FormData;e.append("name",t),i.A.post("http://localhost:8081/admin/cate/add",e,{headers:{token:this.$store.state.token}}).then((t=>{200==t.data.code?this.$message({type:"success",message:"添加成功"}):this.$message({type:"info",message:"发送 POST 请求出错，请稍后重试"})})).catch((()=>{this.$message({type:"info",message:"取消输入"})}))})).catch((()=>{this.$message({type:"info",message:"取消输入"})}))},loadCategory(){i.A.get("http://localhost:8081/universal/categories").then((t=>{200===t.data.code?this.data=t.data.data:console.error("Error fetching categories:",data.message)})).catch((t=>{console.error("Error fetching categories:",t)}))}}},g=m,f=a(1656),v=(0,f.A)(g,h,p,!1,null,null,null),b=v.exports,y=function(){var t=this,e=t._self._c;return e("div",[e("el-button",{staticClass:"left-button",attrs:{type:"text"},on:{click:t.addGoods}},[t._v("添加")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,border:""}},[e("el-table-column",{attrs:{fixed:"",prop:"id",label:"id",width:"50"}}),e("el-table-column",{attrs:{prop:"img",label:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:"http://localhost:8081/img/"+t.row.imgPath}})]}}])}),e("el-table-column",{attrs:{prop:"name",label:"名字",width:"120"}}),e("el-table-column",{attrs:{prop:"price",label:"价格(元)",width:"100"}}),e("el-table-column",{attrs:{prop:"category",label:"分类",width:"120"}}),e("el-table-column",{attrs:{prop:"sku",label:"库存",width:"70"}}),e("el-table-column",{attrs:{prop:"sales",label:"销量",width:"120"}}),e("el-table-column",{attrs:{prop:"description",label:"描述",width:"700"}}),e("el-table-column",{attrs:{fixed:"right",label:"启用/禁用",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#afafaf","active-value":"0","inactive-value":"1"},on:{change:function(e){return t.switchStatus(a.row.id)}},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"scope.row.status"}})]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.toModifyPage(a.row.id)}},model:{value:a.row.id,callback:function(e){t.$set(a.row,"id",e)},expression:"scope.row.id"}},[t._v(" 修改 ")])]}}])})],1)],1)},k=[],w=(a(4114),{data(){return{data:[]}},mounted(){this.loadData()},methods:{loadData(){this.$store.state.token;i.A.get("http://localhost:8081/admin/goodsmanager/get",{headers:{token:this.$store.state.token}}).then((t=>{this.data=t.data.data})).catch((function(t){console.error(t)}))},switchStatus(t){const e=new FormData;e.append("id",t.id),e.append("status",t.status);const a={method:"POST",url:"http://localhost:8081/admin/goodsmanager/switch",headers:{token:this.$store.state.token},data:e};i.A.request(a).then((function(t){console.log(t.data)})).catch((function(t){console.error(t)}))},toModifyPage(t){this.$router.push({path:"/modifygoods",query:{itemId:t}})},addGoods(){this.$router.push({path:"/addgoods"})}}}),x=w,_=(0,f.A)(x,y,k,!1,null,"4413abc4",null),$=_.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-container"},[e("div",[e("el-page-header",{attrs:{content:"详情页面"},on:{back:t.goBack}})],1),e("div",[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"商品名称"}},[e("el-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e("el-form-item",{attrs:{label:"商品价格"}},[e("el-input",{model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),e("el-form-item",{attrs:{label:"商品库存"}},[e("el-input",{model:{value:t.sku,callback:function(e){t.sku=e},expression:"sku"}})],1),e("el-form-item",{attrs:{label:"分类"}},[e("el-select",{attrs:{placeholder:"选择分类"},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}},t._l(t.categories,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("input",{attrs:{type:"file"},on:{change:t.handleFileChange}})]),e("el-form-item",{attrs:{label:"商品描述"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")])],1)],1)],1)])},P=[],A={data(){return{categories:[],file:null,name:"",price:"",sku:"",description:"",categoryId:""}},created(){this.loadCategories()},methods:{goBack(){this.$router.go(-1)},handleFileChange(t){this.file=t.target.files[0]},addGoods(){const t={method:"POST",url:"http://localhost:8081/admin/goodsmanager/add",headers:{token:this.$store.state.token,"content-type":"multipart/form-data; boundary=---011000010111000001101001"},data:{img:this.file,name:this.name,price:this.price,sku:this.sku,description:this.description,categoryId:this.categoryId}};i.A.request(t).then((t=>{this.categories=[],this.file=null,this.name="",this.price="",this.sku="",this.description="",this.categoryId="",this.$notify({title:"",message:"添加成功",position:"bottom-right"})})).catch((function(t){console.error(t)}))},loadCategories(){i.A.get("http://localhost:8081/universal/categories").then((t=>{const e=t.data;200===e.code?this.categories=e.data:console.error("Error fetching categories:",e.message)})).catch((t=>{console.error("Error fetching categories:",t)}))}}},T=A,C=(0,f.A)(T,S,P,!1,null,null,null),I=C.exports,D=function(){var t=this,e=t._self._c;return e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsData}},[e("el-table-column",{attrs:{label:"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:"http://localhost:8081/img/"+t.row.imgPath}})]}}])}),e("el-table-column",{attrs:{prop:"goodsId",label:"id",width:"180"}}),e("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e("el-table-column",{attrs:{prop:"price",label:"单价"}}),e("el-table-column",{attrs:{prop:"amount",label:"数量","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"totalPrices",label:"总价","show-overflow-tooltip":""}})],1),e("p",[t._v("总计: "+t._s(this.totalPrices))]),e("el-button",{attrs:{type:"danger",round:""},on:{click:t.addOrder}},[t._v("下单")])],1)},O=[],N={data(){return{goodsData:[],totalPrices:0,id:[],orderId:0}},mounted(){this.goodsData=this.$route.query.arrayParam,this.unite()},methods:{unite(){this.totalPrices=this.goodsData.reduce(((t,e)=>t+e.totalPrices),0),this.id=this.goodsData.map((t=>t.id)),console.log(this.id)},addOrder(){i.A.post("http://localhost:8081/user/order/add",this.id,{headers:{token:this.$store.state.token}}).then((t=>{200==t.data.code?(this.orderId=t.data.data.orderId,this.$confirm("订单已添加,请进行支付","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{const t={method:"POST",url:"http://localhost:8081/user/order/confirm",headers:{token:this.$store.state.token,"content-type":"multipart/form-data; boundary=---011000010111000001101001"},data:{orderId:this.orderId}};i.A.request(t).then((t=>{200==t.data.code&&1==t.data.data&&(this.$notify({title:"",message:"支付成功",position:"bottom-right"}),this.$router.push("/show"))}))})).catch((()=>{this.$router.push("/userorder")}))):this.$message.error("订单添加失败，请稍后重试")})).catch((t=>{}))}}},E=N,z=(0,f.A)(E,D,O,!1,null,null,null),F=z.exports,L=function(){var t=this,e=t._self._c;return e("div",[e("el-page-header",{attrs:{content:"修改页面"},on:{back:t.goBack}}),e("div",[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"商品名称"}},[e("el-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e("el-form-item",{attrs:{label:"商品价格"}},[e("el-input",{model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),e("el-form-item",{attrs:{label:"商品库存"}},[e("el-input",{model:{value:t.sku,callback:function(e){t.sku=e},expression:"sku"}})],1),e("el-form-item",{attrs:{label:"分类"}},[e("el-select",{attrs:{placeholder:"选择分类"},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}},t._l(t.categories,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("input",{attrs:{type:"file"},on:{change:t.handleFileChange}})]),e("el-form-item",{attrs:{label:"商品描述"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.updateGoods}},[t._v("修改")])],1)],1)],1)],1)},q=[],B={data(){return{categories:[],id:"",name:"",description:"",sku:"",price:"",file:null,categoryId:""}},mounted(){this.id=this.$route.query.itemId,this.loadData()},methods:{goBack(){this.$router.go(-1)},handleFileChange(t){this.file=t.target.files[0]},loadData(){i.A.get("http://localhost:8081/universal/categories").then((t=>{const e=t.data;200===e.code?this.categories=e.data:console.error("Error fetching categories:",e.message)})).catch((t=>{console.error("Error fetching categories:",t)})),i.A.get("http://localhost:8081/admin/goodsmanager/check",{params:{id:this.$route.query.itemId},headers:{token:this.$store.state.token}}).then((t=>{this.name=t.data.data.name,this.description=t.data.data.description,this.price=t.data.data.price,this.imgPath=t.data.data.imgPath,this.sku=t.data.data.sku}))},updateGoods(){const t={method:"POST",url:"http://localhost:8081/admin/goodsmanager/update",headers:{token:this.$store.state.token,"content-type":"multipart/form-data; boundary=---011000010111000001101001"},data:{id:this.id,img:this.file,name:this.name,price:this.price,sku:this.sku,description:this.description,categoryId:this.categoryId}};i.A.request(t).then((t=>{this.categories=[],this.file=null,this.name="",this.price="",this.sku="",this.description="",this.categoryId="",this.$notify({title:"",message:"修改成功",position:"bottom-right"})})).catch((function(t){console.error(t)}))}}},G=B,j=(0,f.A)(G,L,q,!1,null,null,null),M=j.exports,J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"divclass"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:""}},[e("el-table-column",{attrs:{fixed:"",prop:"id",label:"订单号",width:"150"}}),e("el-table-column",{attrs:{prop:"totalPrices",label:"订单金额",width:"120"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.getOrderDetails(a.row.id)}}},[t._v("详细")]),"2"==a.row.status?e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.payOrder(a.row.id)}}},[t._v("支付")]):t._e(),"1"==a.row.status?e("el-tag",{attrs:{type:"success"}},[t._v("已完成")]):t._e(),"0"==a.row.status?e("el-tag",{attrs:{type:"danger"}},[t._v("未完成")]):t._e()]}}])})],1)],1)},R=[],H={data(){return{orderList:[]}},mounted(){this.loadOrder()},methods:{loadOrder(){i.A.get("http://localhost:8081/user/order/list",{headers:{token:this.$store.state.token}}).then((t=>{this.orderList=t.data.data})).catch((t=>{}))},payOrder(t){this.$confirm("请点击确认进行支付","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{const e={method:"POST",url:"http://localhost:8081/user/order/confirm",headers:{token:this.$store.state.token,"content-type":"multipart/form-data; boundary=---011000010111000001101001"},data:{orderId:t}};i.A.request(e).then((t=>{200==t.data.code&&1==t.data.data&&this.$notify({title:"",message:"支付成功",position:"bottom-right"})}))})).catch((()=>{}))},getOrderDetails(t){this.$router.push({path:"/orderdetails",query:{itemId:t}})}}},U=H,K=(0,f.A)(U,J,R,!1,null,null,null),Q=K.exports,V=function(){var t=this,e=t._self._c;return e("div",[e("el-page-header",{attrs:{content:"订单页"},on:{back:t.goBack}}),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderDetails}},[e("el-table-column",{attrs:{label:"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:"http://localhost:8081/img/"+t.row.imgPath}})]}}])}),e("el-table-column",{attrs:{prop:"goodsId",label:"id",width:"180"}}),e("el-table-column",{attrs:{prop:"name",label:"名字",width:"180"}}),e("el-table-column",{attrs:{prop:"price",label:"单价"}}),e("el-table-column",{attrs:{prop:"amount",label:"数量","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"totalPrices",label:"总价","show-overflow-tooltip":""}})],1),e("p",[t._v("总计: "+t._s(this.totalPrices))])],1)},W=[],X={data(){return{orderDetails:[],totalPrices:0}},mounted(){this.loadDetails()},methods:{goBack(){this.$router.go(-1)},loadDetails(){i.A.get("http://localhost:8081/user/order/orderdetail",{params:{orderId:this.$route.query.itemId},headers:{token:this.$store.state.token}}).then((t=>{this.orderDetails=t.data.data,this.totalPrices=this.orderDetails.reduce(((t,e)=>t+e.totalPrices),0)})).catch((function(t){console.error(t)}))}}},Y=X,Z=(0,f.A)(Y,V,W,!1,null,null,null),tt=Z.exports,et={name:"App",components:{Select:l["default"],Cart:n["default"],Login:d["default"],Register:c["default"],Details:u["default"],ManageCategory:b,ManageGoods:$,AddGoods:I,CreateOrder:F,ModifyGoods:M,UserOrder:Q,OrderDetails:tt},data(){return{avatar:this.$store.state.avatar}},methods:{logOut(){localStorage.removeItem("token"),localStorage.removeItem("userType"),localStorage.removeItem("avatar"),i.A.post("http://localhost:8081/user/common/logout",null,{headers:{token:this.$store.state.token}}).then((t=>{this.$store.dispatch("saveToken",""),this.$store.dispatch("saveuserType",""),this.$store.dispatch("avatar","")}))}}},at=et,ot=(0,f.A)(at,r,s,!1,null,"36f2f3e3",null),rt=ot.exports,st=a(9143),it=a.n(st),lt=a(6178);const nt=()=>Promise.resolve().then(a.bind(a,4107)),dt=()=>Promise.resolve().then(a.bind(a,3476)),ct=()=>Promise.resolve().then(a.bind(a,3638)),ut=()=>Promise.resolve().then(a.bind(a,9958)),ht=()=>Promise.resolve().then(a.bind(a,9571));o["default"].use(lt.Ay);const pt=new lt.Ay({routes:[{path:"",redirect:"/show"},{path:"/show",component:nt},{path:"/cart",component:dt},{path:"/login",component:ct},{path:"/register",component:ut},{path:"/details",component:ht},{path:"/managecategory",component:b},{path:"/managegoods",component:$},{path:"/addgoods",component:I},{path:"/createorder",component:F},{path:"/modifygoods",component:M},{path:"/userorder",component:Q},{path:"/orderdetails",component:tt}]});var mt=pt,gt=a(3518);o["default"].use(gt.Ay);const ft=new gt.Ay.Store({state:{token:"",userType:"",avatar:""},mutations:{setToken(t,e){t.token=e},setuserType(t,e){t.userType=e},setAvatar(t,e){t.avatar=e}},actions:{saveToken({commit:t},e){t("setToken",e)},saveuserType({commit:t},e){t("setuserType",e)},saveAvatar({commit:t},e){t("setAvatar","http://localhost:8081/avatar/"+e)}}});var vt=ft;o["default"].config.productionTip=!1,o["default"].use(it()),new o["default"]({render:t=>t(rt),router:mt,store:vt}).$mount("#app")}},e={};function a(o){var r=e[o];if(void 0!==r)return r.exports;var s=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,o,r,s){if(!o){var i=1/0;for(c=0;c<t.length;c++){o=t[c][0],r=t[c][1],s=t[c][2];for(var l=!0,n=0;n<o.length;n++)(!1&s||i>=s)&&Object.keys(a.O).every((function(t){return a.O[t](o[n])}))?o.splice(n--,1):(l=!1,s<i&&(i=s));if(l){t.splice(c--,1);var d=r();void 0!==d&&(e=d)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[o,r,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,s,i=o[0],l=o[1],n=o[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(n)var c=n(a)}for(e&&e(o);d<i.length;d++)s=i[d],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(c)},o=self["webpackChunkeshop"]=self["webpackChunkeshop"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(8030)}));o=a.O(o)})();
//# sourceMappingURL=app.e3f8fa3b.js.map